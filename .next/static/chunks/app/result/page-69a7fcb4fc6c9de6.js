(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{4579:function(e,t,r){Promise.resolve().then(r.bind(r,3415))},3415:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var o=r(7437),i=r(2265),n=r(5475),d=r(5616),a=r(9487);function l(){var e,t;let r=(0,n.useSearchParams)(),l=(0,n.useRouter)(),s=Number(null!==(e=r.get("total"))&&void 0!==e?e:0),c=Number(null!==(t=r.get("correct"))&&void 0!==t?t:0),f=s>0?Math.round(c/s*100):0,[u,p]=i.useState(null),[h,x]=i.useState(null),[b,g]=i.useState(!1);i.useEffect(()=>{let e=async()=>{g(!0);let e=(0,a.L)();x(e.id);try{let t=await fetch("/api/encourage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({characterId:e.id,correctCount:c,totalCount:s,accuracy:f,wrongCount:s-c,mood:f>=70?"normal":f>=40?"a_bit_down":"very_down",attemptNumber:1,trendDescription:""})});if(!t.ok)throw Error("failed");let r=await t.json();p(r.message)}catch(t){p("".concat(e.name,"だよ。ルーちゃん、ここまでやりきっただけで本当にすごいと思うんだ。\n点数よりも、チャレンジしたことをいっしょに喜びたいな。"))}finally{g(!1)}};s>0&&e()},[f,c,s]);let m=f>=80?"かなり理解できてきてるね。この調子で、ルーちゃんのペースでいこ。":f>=50?"土台ができてきた感じだよ。今日はまちがえたところをちょっとだけ見なおせたら、それで十分。":"ここからがスタートって感じだね。少しずつ慣れていけば大丈夫。あせらなくていいよ。";return(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{style:{fontSize:22,marginBottom:8},children:"けっか"}),(0,o.jsx)("p",{style:{fontSize:14,color:"#666",marginBottom:12},children:"ここまでがんばったルーちゃんを、まずはぎゅっとほめてあげよ。"}),(0,o.jsxs)("div",{style:{backgroundColor:"#ffffff",borderRadius:12,padding:"12px 14px",marginBottom:16,boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:[(0,o.jsxs)("p",{style:{margin:0,marginBottom:6},children:["正解数：",c," / ",s," 問"]}),(0,o.jsxs)("p",{style:{margin:0,marginBottom:6},children:["正解率：",f,"%"]}),(0,o.jsx)("p",{style:{margin:0,fontSize:14,color:"#555"},children:m})]}),b&&(0,o.jsx)("p",{style:{fontSize:13,color:"#888"},children:"うさちゃんたちがメッセージを考え中…"}),u&&h&&(0,o.jsx)("div",{style:{marginTop:12},children:(0,o.jsx)(d.F,{characterId:h,text:u})}),(0,o.jsx)("div",{style:{marginTop:24,display:"flex",flexDirection:"column",gap:10},children:(0,o.jsx)("button",{onClick:()=>l.push("/"),style:{padding:"8px 14px",borderRadius:999,border:"1px solid #ddd",background:"#fff",fontSize:13,cursor:"pointer"},children:"ホームにもどる"})})]})}},5616:function(e,t,r){"use strict";r.d(t,{F:function(){return n}});var o=r(7437);r(2265);var i=r(9487);let n=e=>{var t;let{characterId:r,text:n}=e,d=null!==(t=i.R.find(e=>e.id===r))&&void 0!==t?t:i.R[0],a="rabbit"===d.species?"\uD83D\uDC30":"\uD83D\uDC36";return(0,o.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:12,margin:"12px 0"},children:[(0,o.jsx)("div",{style:{padding:4,borderRadius:18,background:"linear-gradient(135deg, #d7b18b 0%, #c09363 40%, #a97a4c 100%)",boxShadow:"0 2px 0 #7a4a24",flexShrink:0},children:(0,o.jsx)("div",{style:{width:56,height:56,borderRadius:14,backgroundColor:d.colorCode,border:"2px solid rgba(255,255,255,0.8)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:11},children:(0,o.jsxs)("div",{style:{textAlign:"center",lineHeight:1.2},children:[(0,o.jsx)("div",{style:{fontSize:20},children:a}),(0,o.jsx)("div",{children:d.name})]})})}),(0,o.jsxs)("div",{style:{position:"relative",maxWidth:"100%",padding:"10px 14px",borderRadius:18,background:"linear-gradient(135deg, #f3ffe8 0%, #fffdf7 40%, #ffeaf2 100%)",border:"1px solid rgba(188, 209, 170, 0.9)",boxShadow:"0 3px 0 rgba(150, 171, 132, 0.9)"},children:[(0,o.jsx)("div",{style:{position:"absolute",left:-9,top:20,width:0,height:0,borderTop:"9px solid transparent",borderBottom:"9px solid transparent",borderRight:"9px solid #e9f9dd",filter:"drop-shadow(0 1px 0 rgba(150,171,132,0.7))"}}),(0,o.jsx)("div",{style:{fontSize:13,whiteSpace:"pre-wrap",color:"#4b3a2a"},children:n})]})]})}},9487:function(e,t,r){"use strict";r.d(t,{L:function(){return i},R:function(){return o}});let o=[{id:"tia",name:"ティア",species:"rabbit",colorName:"クリーム",colorCode:"#ffe0b2"},{id:"mochu",name:"もちゅ",species:"rabbit",colorName:"茶色",colorCode:"#d7a56b"},{id:"syrup",name:"シロップ",species:"rabbit",colorName:"灰色",colorCode:"#b0bec5"},{id:"puffi",name:"ぱふぃー",species:"dog",colorName:"白",colorCode:"#ffffff"}];function i(){return o[Math.floor(Math.random()*o.length)]}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4579)}),_N_E=e.O()}]);