(()=>{var e={};e.id=929,e.ids=[929],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3802:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>f,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>l}),r(1980),r(9117),r(5866);var i=r(3191),n=r(8716),o=r(7922),a=r.n(o),s=r(5231),d={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>s[e]);r.d(t,d);let l=["",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1980)),"/workspaces/ru-tyannouenn/app/chat/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9117)),"/workspaces/ru-tyannouenn/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/ru-tyannouenn/app/chat/page.tsx"],p="/chat/page",f={require:r,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/chat/page",pathname:"/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},4716:(e,t,r)=>{Promise.resolve().then(r.bind(r,2130))},5631:(e,t,r)=>{Promise.resolve().then(r.bind(r,7498))},3672:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},2130:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var i=r(326),n=r(7577),o=r.n(n),a=r(854),s=r(5491);function d(){let[e,t]=o().useState("tia"),[r,n]=o().useState(""),[d,l]=o().useState([{from:"character",characterId:"tia",text:"ティアだよ。ルーちゃん、なんとなく話したくなったら、なんでも聞いてみてね。"}]),[c,p]=o().useState(!1),f=o().useRef(null),u=async()=>{if(!r.trim())return;let t=r.trim();n(""),l(e=>[...e,{from:"user",text:t}]),p(!0);try{let r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({characterId:e,userMessage:t,history:d.slice(-6)})});if(!r.ok)throw Error("failed");let i=await r.json();l(t=>[...t,{from:"character",characterId:e,text:i.message}])}catch(t){l(t=>[...t,{from:"character",characterId:e,text:"ちょっとお返事がうまく送れなかったみたい…。でも、ルーちゃんの話を聞けたのはうれしいよ。"}])}finally{p(!1)}},x=a.R.find(t=>t.id===e);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",minHeight:"calc(100vh - 80px)"},children:[i.jsx("h2",{style:{fontSize:22,marginBottom:8},children:"おしゃべりルーム"}),(0,i.jsxs)("p",{style:{fontSize:13,color:"#666",marginBottom:8},children:[x.name,"とお話しできるよ。ルーちゃんの気持ちや、勉強のこととか、なんでも話してみてね。"]}),(0,i.jsxs)("div",{style:{marginBottom:8},children:[i.jsx("label",{style:{fontSize:13,display:"block",marginBottom:4,fontWeight:600},children:"だれと話す？"}),i.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:a.R.map(r=>(0,i.jsxs)("button",{onClick:()=>{t(r.id),l([{from:"character",characterId:r.id,text:`${r.name}だよ。ルーちゃん、ここに来てくれてうれしいな。
話したいことや聞きたいこと、なんでも投げてみてね。`}])},style:{padding:"6px 10px",borderRadius:999,border:e===r.id?"2px solid #ff9ecb":"1px solid #ddd",backgroundColor:e===r.id?"#fff0f6":"#ffffff",fontSize:13,cursor:"pointer"},children:["rabbit"===r.species?"\uD83D\uDC30":"\uD83D\uDC36"," ",r.name]},r.id))})]}),i.jsx("div",{style:{flex:1,overflowY:"auto",padding:"8px 0",borderRadius:12,backgroundColor:"#fff",border:"1px solid #eee",marginBottom:10},children:(0,i.jsxs)("div",{style:{padding:"0 8px"},children:[d.map((e,t)=>"character"===e.from?i.jsx(s.F,{characterId:e.characterId,text:e.text},t):i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",margin:"8px 0"},children:i.jsx("div",{style:{backgroundColor:"#e1f5fe",padding:"8px 10px",borderRadius:16,maxWidth:"75%",fontSize:14,whiteSpace:"pre-wrap"},children:e.text})},t)),i.jsx("div",{ref:f})]})}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[i.jsx("textarea",{value:r,onChange:e=>n(e.target.value),rows:2,placeholder:"ルーちゃんの気持ちや、話したいことを書いてみてね",style:{flex:1,borderRadius:8,border:"1px solid #ddd",padding:8,fontSize:14,resize:"none"}}),i.jsx("button",{onClick:u,disabled:c,style:{padding:"8px 12px",borderRadius:10,border:"none",background:"linear-gradient(135deg, #ffb6c1 0%, #ffd1ff 50%, #ffe4b5 100%)",fontSize:14,fontWeight:600,cursor:"pointer",minWidth:68},children:c?"…":"送信"})]})]})}},5491:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var i=r(326);r(7577);var n=r(854);let o=({characterId:e,text:t})=>{let r=n.R.find(t=>t.id===e)??n.R[0],o="rabbit"===r.species?"\uD83D\uDC30":"\uD83D\uDC36";return(0,i.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:12,margin:"12px 0"},children:[i.jsx("div",{style:{padding:4,borderRadius:18,background:"linear-gradient(135deg, #d7b18b 0%, #c09363 40%, #a97a4c 100%)",boxShadow:"0 2px 0 #7a4a24",flexShrink:0},children:i.jsx("div",{style:{width:56,height:56,borderRadius:14,backgroundColor:r.colorCode,border:"2px solid rgba(255,255,255,0.8)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:11},children:(0,i.jsxs)("div",{style:{textAlign:"center",lineHeight:1.2},children:[i.jsx("div",{style:{fontSize:20},children:o}),i.jsx("div",{children:r.name})]})})}),(0,i.jsxs)("div",{style:{position:"relative",maxWidth:"100%",padding:"10px 14px",borderRadius:18,background:"linear-gradient(135deg, #f3ffe8 0%, #fffdf7 40%, #ffeaf2 100%)",border:"1px solid rgba(188, 209, 170, 0.9)",boxShadow:"0 3px 0 rgba(150, 171, 132, 0.9)"},children:[i.jsx("div",{style:{position:"absolute",left:-9,top:20,width:0,height:0,borderTop:"9px solid transparent",borderBottom:"9px solid transparent",borderRight:"9px solid #e9f9dd",filter:"drop-shadow(0 1px 0 rgba(150,171,132,0.7))"}}),i.jsx("div",{style:{fontSize:13,whiteSpace:"pre-wrap",color:"#4b3a2a"},children:t})]})]})}},7498:(e,t,r)=>{"use strict";r.d(t,{SecretGate:()=>a});var i=r(326),n=r(7577),o=r.n(n);let a=({children:e})=>{let[t,r]=o().useState(null),[n,a]=o().useState(""),[s,d]=o().useState(null),l=process.env.NEXT_PUBLIC_APP_SECRET_CODE??"";return(o().useEffect(()=>{},[]),null===t)?i.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,color:"#666"},children:"読み込み中だよ…"}):t?i.jsx(i.Fragment,{children:e}):i.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#fff7fb"},children:(0,i.jsxs)("div",{style:{width:"100%",maxWidth:360,padding:"20px 18px",borderRadius:16,backgroundColor:"#ffffff",boxShadow:"0 4px 14px rgba(0,0,0,0.08)"},children:[i.jsx("h1",{style:{fontSize:20,marginBottom:8},children:"ひみつの入り口"}),(0,i.jsxs)("p",{style:{fontSize:13,color:"#666",marginBottom:12,whiteSpace:"pre-wrap"},children:["ここはルーちゃん専用のお部屋だよ。","\n","いっしょに決めた「合言葉」を入れてね。"]}),(0,i.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!l){d("合言葉が設定されていないみたい…（開発用のエラー）");return}n===l?(r(!0),d(null)):d("合言葉がちがうみたい。ルーちゃんだけのひみつの言葉を入れてね。")},children:[i.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,marginBottom:4},children:"合言葉"}),i.jsx("input",{type:"password",value:n,onChange:e=>a(e.target.value),placeholder:"三子ちゃんとチモシー",className:"input-wood",style:{marginBottom:8}}),s&&i.jsx("p",{style:{fontSize:12,color:"#c0392b",marginBottom:8,whiteSpace:"pre-wrap"},children:s}),i.jsx("button",{type:"submit",className:"btn-wood",style:{width:"100%"},children:"入る"})]}),i.jsx("button",{type:"button",onClick:()=>{r(!1),a(""),d(null)},style:{marginTop:8,width:"100%",padding:"6px 10px",borderRadius:999,border:"1px dashed #ddd",background:"#fff",fontSize:11,color:"#999",cursor:"pointer"},children:"合言葉を入れなおす"})]})})}},854:(e,t,r)=>{"use strict";r.d(t,{L:()=>n,R:()=>i});let i=[{id:"tia",name:"ティア",species:"rabbit",colorName:"クリーム",colorCode:"#ffe0b2"},{id:"mochu",name:"もちゅ",species:"rabbit",colorName:"茶色",colorCode:"#d7a56b"},{id:"syrup",name:"シロップ",species:"rabbit",colorName:"灰色",colorCode:"#b0bec5"},{id:"puffi",name:"ぱふぃー",species:"dog",colorName:"白",colorCode:"#ffffff"}];function n(){return i[Math.floor(Math.random()*i.length)]}},1980:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(8570).createProxy)(String.raw`/workspaces/ru-tyannouenn/app/chat/page.tsx#default`)},9117:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>o});var i=r(9510);r(7272),r(1159);let n=(0,r(8570).createProxy)(String.raw`/workspaces/ru-tyannouenn/components/SecretGate.tsx#SecretGate`),o={title:"ルーちゃんの森の勉強小屋",description:"小さな動物たちとルーちゃんが、歯科国試の勉強をのんびり進める場所。",robots:{index:!1,follow:!1}};function a({children:e}){return i.jsx("html",{lang:"ja",children:i.jsx("body",{children:i.jsx(n,{children:i.jsx("main",{className:"main-wrapper",children:e})})})})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[276,471],()=>r(3802));module.exports=i})();